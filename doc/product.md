# 罐头日记 - 产品文档

## 产品概述

罐头日记是一款专为小学生设计的 AI 驱动日记应用。通过"封存日记"的趣味概念，让孩子把每天的心情和故事装进"小罐头"里，AI 小伙伴会给予温暖的回应和写作素材推荐。

### 目标用户

- 小学 1-6 年级学生
- 初中生（高年级模式）
- 希望培养孩子写作习惯的家长

### 产品定位

**写作灵感激发器 + 语文素材库 + AI 学习伙伴**

---

## 功能模块

### 1. 首页 - 日记记录

首页是应用的核心入口，提供日历视图和日记编写功能。

#### 1.1 日历视图
- 月视图日历展示
- 已写日记的日期标记（罐头图标）
- 未写日记的日期可打开"惊喜罐头"
- 支持左右滑动切换月份

#### 1.2 日记编写
- 文本输入框，支持多行输入
- 语音输入功能（麦克风按钮）
- 心情选择（15 种心情）
- 天气选择（9 种天气）

**心情类型：**
| 心情 | 中文 |
|------|------|
| happy | 开心 |
| calm | 平静 |
| sad | 难过 |
| angry | 生气 |
| excited | 兴奋 |
| fulfilled | 充实 |
| smitten | 心动 |
| annoyed | 烦躁 |
| lonely | 孤独 |
| confused | 困惑 |
| warm | 温暖 |
| sweet | 甜蜜 |
| pouty | 委屈 |
| lucky | 幸运 |
| tired | 疲惫 |

**天气类型：**
| 天气 | 中文 |
|------|------|
| sunny | 晴天 |
| cloudy | 多云 |
| overcast | 阴天 |
| lightRain | 小雨 |
| heavyRain | 大雨 |
| thunderstorm | 雷阵雨 |
| snowy | 雪天 |
| windy | 大风 |
| foggy | 雾天 |

#### 1.3 日记封存
点击"封存日记"按钮后：
1. 日记内容提交给 AI 分析
2. AI 生成个性化回信
3. AI 推荐相关写作素材
4. 自动完成当日签到
5. 跳转到日记详情页

---

### 2. 日记详情页

展示已封存日记的完整内容和 AI 反馈。

#### 2.1 日记内容区
- 日期和星期显示
- 心情、天气图标
- 完整日记内容

#### 2.2 AI 回信区
AI 回信包含三部分：
1. **情感共鸣** - 对日记内容的理解和回应
2. **素材推荐** - 与日记主题相关的诗词/名言/故事
3. **温暖鼓励** - 激励孩子继续写作

#### 2.3 推荐素材
- 可点击查看素材详情
- 包含原文、拼音、释义、用法建议

---

### 3. 素材库

分类展示语文学习素材，支持无限滚动加载。

#### 3.1 五大分类

| 分类 | 说明 | 内容示例 |
|------|------|----------|
| **文学常识** | 文学典故、作家作品 | 唐诗宋词背景、名著简介 |
| **诗词成语** | 古诗词、成语典故 | 《静夜思》、"画龙点睛" |
| **名人名言** | 中外名人经典语录 | 鲁迅、爱因斯坦名言 |
| **热点时事** | 适合学生的新闻热点 | 科技发现、体育赛事 |
| **人文百科** | 历史地理文化知识 | 长城、中秋节由来 |

#### 3.2 年级分级

素材按年级分为三个层次：

| 层级 | 年级范围 | 特点 |
|------|----------|------|
| **低年级** | 1-3 年级 | 简单词汇、必有拼音、活泼风格 |
| **中年级** | 4-6 年级 | 常见成语、修辞手法、亲切风格 |
| **高年级** | 初中 | 丰富词汇、文学性强、成熟风格 |

#### 3.3 素材详情

每个素材包含：
- **标题** - 素材名称
- **原文** - 完整内容
- **拼音** - 注音（低年级必有）
- **作者/出处** - 来源信息
- **白话释义** - 通俗解释
- **创作背景** - 历史背景故事
- **写作应用** - 如何用在作文中

---

### 4. AI 聊天

与 AI 助手"小罐罐"进行实时对话。

#### 4.1 对话能力
- 回答语文相关问题
- 解释词语、成语、诗词
- 提供写作建议
- 搜索历史日记

#### 4.2 工具调用
聊天中 AI 可调用以下工具：

| 工具 | 功能 |
|------|------|
| **搜索日记** | 按关键词或心情搜索历史日记 |
| **获取日记详情** | 查看某篇日记的完整内容 |
| **获取素材** | AI 实时生成相关素材 |
| **解释概念** | 深入解释词语或知识点 |
| **保存记忆** | 记住用户的偏好和信息 |

#### 4.3 快捷提问
提供预设问题按钮：
- "帮我想一个作文开头"
- "解释一下这个成语"
- "推荐一首关于春天的诗"

#### 4.4 聊天历史
- 自动保存对话记录
- 支持新建会话
- 可查看历史会话列表

---

### 5. 惊喜罐头

为未写日记的日期提供趣味互动内容。

#### 5.1 触发条件
- 点击日历上未写日记的历史日期
- 点击"打开惊喜"按钮

#### 5.2 惊喜类型

| 类型 | 说明 |
|------|------|
| **写作挑战** | 趣味写作任务，如"用三个词写一个故事" |
| **知识趣味** | 有趣的语文知识或冷知识 |
| **创意写作** | 创意写作提示，如"假如你是一只小鸟" |

---

### 6. 签到系统

记录写日记习惯的打卡系统。

#### 6.1 自动签到
- 封存日记时自动完成当日签到
- 无需手动操作

#### 6.2 连续打卡
- 显示连续打卡天数
- 打卡动画展示
- 历史签到记录查看

---

## 用户流程

### 典型使用流程

```
打开应用
    ↓
查看今日日期（首页日历）
    ↓
编写日记内容
    ↓
选择心情和天气
    ↓
点击"封存日记"
    ↓
查看 AI 回信和推荐素材
    ↓
点击素材了解更多
    ↓
（可选）与 AI 对话提问
```

### 浏览素材流程

```
点击底部"素材库"Tab
    ↓
选择分类（文学/诗词/名言等）
    ↓
滚动浏览素材列表
    ↓
点击感兴趣的素材
    ↓
查看详情（释义/背景/用法）
```

---

## 年级适配

应用根据用户选择的年级自动调整内容：

### 低年级模式（1-3 年级）
- 所有内容带拼音注音
- 简单词汇，句子不超过 10 字
- 多用叠词、拟声词
- 活泼可爱的语言风格
- AI 回信更加温暖亲切

### 中年级模式（4-6 年级）
- 引入常见成语和修辞手法
- 知心朋友式的交流风格
- 鼓励独立思考
- 适当引入背景知识

### 高年级模式（初中）
- 丰富词汇和文学表达
- 启发批判性思维
- 成熟稳重的交流风格
- 更深入的知识拓展

---

## 数据存储

### 本地存储
所有用户数据存储在设备本地：
- **日记内容** - IndexedDB
- **聊天记录** - IndexedDB
- **用户偏好** - localStorage
- **签到记录** - localStorage

### 隐私保护
- 无需注册账户
- 数据不上传云端
- 完全本地化存储

---

## 界面导航

### 底部导航栏

| 图标 | 名称 | 功能 |
|------|------|------|
| 📖 | 首页 | 日记记录入口 |
| 📚 | 素材库 | 浏览学习素材 |
| 💬 | 聊天 | AI 对话助手 |

### 页面跳转关系

```
首页 ←→ 日记详情 → 素材详情
  ↓
素材库 → 素材详情
  ↓
聊天页
```

---

## 产品亮点

1. **AI 个性化反馈** - 每篇日记都能获得专属回应
2. **年级自适应** - 内容难度随年级自动调整
3. **趣味互动** - 惊喜罐头增加使用乐趣
4. **隐私优先** - 数据本地存储，保护隐私
5. **秒开体验** - 首屏素材预加载，无等待
6. **离线可用** - 核心功能无需网络
